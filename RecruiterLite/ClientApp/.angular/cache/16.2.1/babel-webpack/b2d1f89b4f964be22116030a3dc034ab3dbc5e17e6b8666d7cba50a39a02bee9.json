{"ast":null,"code":"var _class;\nimport { createEffect, ofType } from \"@ngrx/effects\";\nimport { CandidatesActionTypes, loadCandidates, loadCandidatesSuccess, saveCandidateError, saveCandidateSuccess } from \"./candidates.actions\";\nimport { map, of, switchMap } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"./candidates-api.service\";\nexport class CandidatesEffects {\n  constructor(actions$, candidatesApiService) {\n    this.actions$ = actions$;\n    this.candidatesApiService = candidatesApiService;\n    this.loadCandidates$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.LOAD_CANDIDATES), switchMap(() => this.candidatesApiService.loadCandidates().pipe(map(response => loadCandidatesSuccess({\n        response\n      })))));\n    });\n    this.saveCandidate$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE), switchMap(({\n        request,\n        id\n      }) => this.candidatesApiService.saveCandidate(request).pipe(map(() => {\n        return saveCandidateSuccess(request);\n      }), catchError(error => of(saveCandidateError({\n        error: error.message\n      }))))));\n    });\n    this.reloadCandidates = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS, CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS), map(response => loadCandidates()));\n    });\n  }\n}\n_class = CandidatesEffects;\n_class.ɵfac = function CandidatesEffects_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.CandidatesApiService));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac\n});","map":{"version":3,"names":["createEffect","ofType","CandidatesActionTypes","loadCandidates","loadCandidatesSuccess","saveCandidateError","saveCandidateSuccess","map","of","switchMap","catchError","CandidatesEffects","constructor","actions$","candidatesApiService","loadCandidates$","pipe","LOAD_CANDIDATES","response","saveCandidate$","SAVE_CANDIDATE","request","id","saveCandidate","error","message","reloadCandidates","SAVE_CANDIDATE_SUCCESS","DELETE_CANDIDATE_SUCCESS","i0","ɵɵinject","i1","Actions","i2","CandidatesApiService","factory","ɵfac"],"sources":["/Users/richardash/Dev/RecruiterLite/RecruiterLite/ClientApp/src/app/candidates/store/candidates.effects.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport {Actions, createEffect, ofType} from \"@ngrx/effects\";\nimport {CandidatesApiService} from \"./candidates-api.service\";\nimport {\n  CandidatesActionTypes, loadCandidates,\n  loadCandidatesSuccess,\n  saveCandidateError,\n  saveCandidateSuccess\n} from \"./candidates.actions\";\nimport {map, of, switchMap} from \"rxjs\";\nimport {catchError} from \"rxjs/operators\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\n\n@Injectable()\nexport class CandidatesEffects {\n  loadCandidates$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.LOAD_CANDIDATES),\n      switchMap(() =>\n        this.candidatesApiService.loadCandidates().pipe(map((response) => loadCandidatesSuccess({response})))\n      )\n    );\n  });\n\n  saveCandidate$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.SAVE_CANDIDATE),\n      switchMap(({ request, id }) =>\n        this.candidatesApiService.saveCandidate(request).pipe(\n          map(() => {\n            return saveCandidateSuccess(request);\n          }),\n          catchError((error: HttpErrorResponse) => of(saveCandidateError({ error: error.message })))\n        )\n      )\n    );\n  });\n\n  reloadCandidates = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(\n        CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS,\n        CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS,\n      ),\n      map((response) => loadCandidates())\n    );\n  });\n  constructor(private actions$: Actions, private candidatesApiService: CandidatesApiService) {\n  }\n}\n"],"mappings":";AACA,SAAiBA,YAAY,EAAEC,MAAM,QAAO,eAAe;AAE3D,SACEC,qBAAqB,EAAEC,cAAc,EACrCC,qBAAqB,EACrBC,kBAAkB,EAClBC,oBAAoB,QACf,sBAAsB;AAC7B,SAAQC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAO,MAAM;AACvC,SAAQC,UAAU,QAAO,gBAAgB;;;;AAIzC,OAAM,MAAOC,iBAAiB;EAiC5BC,YAAoBC,QAAiB,EAAUC,oBAA0C;IAArE,KAAAD,QAAQ,GAARA,QAAQ;IAAmB,KAAAC,oBAAoB,GAApBA,oBAAoB;IAhCnE,KAAAC,eAAe,GAAGf,YAAY,CAAC,MAAK;MAClC,OAAO,IAAI,CAACa,QAAQ,CAACG,IAAI,CACvBf,MAAM,CAACC,qBAAqB,CAACe,eAAe,CAAC,EAC7CR,SAAS,CAAC,MACR,IAAI,CAACK,oBAAoB,CAACX,cAAc,EAAE,CAACa,IAAI,CAACT,GAAG,CAAEW,QAAQ,IAAKd,qBAAqB,CAAC;QAACc;MAAQ,CAAC,CAAC,CAAC,CAAC,CACtG,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,cAAc,GAAGnB,YAAY,CAAC,MAAK;MACjC,OAAO,IAAI,CAACa,QAAQ,CAACG,IAAI,CACvBf,MAAM,CAACC,qBAAqB,CAACkB,cAAc,CAAC,EAC5CX,SAAS,CAAC,CAAC;QAAEY,OAAO;QAAEC;MAAE,CAAE,KACxB,IAAI,CAACR,oBAAoB,CAACS,aAAa,CAACF,OAAO,CAAC,CAACL,IAAI,CACnDT,GAAG,CAAC,MAAK;QACP,OAAOD,oBAAoB,CAACe,OAAO,CAAC;MACtC,CAAC,CAAC,EACFX,UAAU,CAAEc,KAAwB,IAAKhB,EAAE,CAACH,kBAAkB,CAAC;QAAEmB,KAAK,EAAEA,KAAK,CAACC;MAAO,CAAE,CAAC,CAAC,CAAC,CAC3F,CACF,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,gBAAgB,GAAG1B,YAAY,CAAC,MAAK;MACnC,OAAO,IAAI,CAACa,QAAQ,CAACG,IAAI,CACvBf,MAAM,CACJC,qBAAqB,CAACyB,sBAAsB,EAC5CzB,qBAAqB,CAAC0B,wBAAwB,CAC/C,EACDrB,GAAG,CAAEW,QAAQ,IAAKf,cAAc,EAAE,CAAC,CACpC;IACH,CAAC,CAAC;EAEF;;SAlCWQ,iBAAiB;;mBAAjBA,MAAiB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,oBAAA;AAAA;;SAAjBvB,MAAiB;EAAAwB,OAAA,EAAjBxB,MAAiB,CAAAyB;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}