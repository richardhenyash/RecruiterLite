{"ast":null,"code":"var _class;\nimport { createEffect, ofType } from \"@ngrx/effects\";\nimport { CandidatesActionTypes, deleteCandidateError, deleteCandidateSuccess, loadCandidates, loadCandidatesSuccess, saveCandidateError, saveCandidateSuccess } from \"./candidates.actions\";\nimport { map, of, switchMap } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"./candidates-api.service\";\nexport class CandidatesEffects {\n  constructor(actions$, candidatesApiService) {\n    this.actions$ = actions$;\n    this.candidatesApiService = candidatesApiService;\n    this.loadCandidates$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.LOAD_CANDIDATES), switchMap(() => this.candidatesApiService.loadCandidates().pipe(map(response => loadCandidatesSuccess({\n        response\n      })))));\n    });\n    this.saveCandidate$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE), switchMap(({\n        request\n      }) => this.candidatesApiService.saveCandidate(request).pipe(map(() => {\n        return saveCandidateSuccess(request);\n      }), catchError(error => of(saveCandidateError({\n        error: error.message\n      }))))));\n    });\n    this.deleteCandidate$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.DELETE_CANDIDATE), switchMap(({\n        id\n      }) => this.candidatesApiService.deleteCandidate(id).pipe(map(() => deleteCandidateSuccess()), catchError(error => of(deleteCandidateError({\n        error: error.message\n      }))))));\n    });\n    this.reloadCandidates$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS, CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS), map(response => {\n        return loadCandidates();\n      }));\n    });\n  }\n}\n_class = CandidatesEffects;\n_class.ɵfac = function CandidatesEffects_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.CandidatesApiService));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac\n});","map":{"version":3,"names":["createEffect","ofType","CandidatesActionTypes","deleteCandidateError","deleteCandidateSuccess","loadCandidates","loadCandidatesSuccess","saveCandidateError","saveCandidateSuccess","map","of","switchMap","catchError","CandidatesEffects","constructor","actions$","candidatesApiService","loadCandidates$","pipe","LOAD_CANDIDATES","response","saveCandidate$","SAVE_CANDIDATE","request","saveCandidate","error","message","deleteCandidate$","DELETE_CANDIDATE","id","deleteCandidate","reloadCandidates$","SAVE_CANDIDATE_SUCCESS","DELETE_CANDIDATE_SUCCESS","i0","ɵɵinject","i1","Actions","i2","CandidatesApiService","factory","ɵfac"],"sources":["/Users/richardash/Dev/RecruiterLite/RecruiterLite/ClientApp/src/app/candidates/store/candidates.effects.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport {Actions, createEffect, ofType} from \"@ngrx/effects\";\nimport {CandidatesApiService} from \"./candidates-api.service\";\nimport {\n  CandidatesActionTypes, deleteCandidateError, deleteCandidateSuccess, loadCandidates,\n  loadCandidatesSuccess,\n  saveCandidateError,\n  saveCandidateSuccess\n} from \"./candidates.actions\";\nimport {map, of, switchMap} from \"rxjs\";\nimport {catchError} from \"rxjs/operators\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\n\n@Injectable()\nexport class CandidatesEffects {\n  loadCandidates$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.LOAD_CANDIDATES),\n      switchMap(() =>\n        this.candidatesApiService.loadCandidates().pipe(map((response) => loadCandidatesSuccess({response})))\n      )\n    );\n  });\n\n  saveCandidate$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.SAVE_CANDIDATE),\n      switchMap(({ request }) =>\n        this.candidatesApiService.saveCandidate(request).pipe(\n          map(() => {\n            return saveCandidateSuccess(request);\n          }),\n          catchError((error: HttpErrorResponse) => of(saveCandidateError({ error: error.message })))\n        )\n      )\n    );\n  });\n\n  deleteCandidate$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.DELETE_CANDIDATE),\n      switchMap(({ id }) =>\n        this.candidatesApiService.deleteCandidate(id).pipe(\n          map(() => deleteCandidateSuccess()),\n          catchError((error: HttpErrorResponse) => of(deleteCandidateError({ error: error.message })))\n        )\n      )\n    );\n  });\n\n  reloadCandidates$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(\n        CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS,\n        CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS,\n      ),\n      map((response) => {\n        return loadCandidates()\n      })\n    );\n  });\n  constructor(private actions$: Actions, private candidatesApiService: CandidatesApiService) {\n  }\n}\n"],"mappings":";AACA,SAAiBA,YAAY,EAAEC,MAAM,QAAO,eAAe;AAE3D,SACEC,qBAAqB,EAAEC,oBAAoB,EAAEC,sBAAsB,EAAEC,cAAc,EACnFC,qBAAqB,EACrBC,kBAAkB,EAClBC,oBAAoB,QACf,sBAAsB;AAC7B,SAAQC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAO,MAAM;AACvC,SAAQC,UAAU,QAAO,gBAAgB;;;;AAIzC,OAAM,MAAOC,iBAAiB;EA+C5BC,YAAoBC,QAAiB,EAAUC,oBAA0C;IAArE,KAAAD,QAAQ,GAARA,QAAQ;IAAmB,KAAAC,oBAAoB,GAApBA,oBAAoB;IA9CnE,KAAAC,eAAe,GAAGjB,YAAY,CAAC,MAAK;MAClC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAACiB,eAAe,CAAC,EAC7CR,SAAS,CAAC,MACR,IAAI,CAACK,oBAAoB,CAACX,cAAc,EAAE,CAACa,IAAI,CAACT,GAAG,CAAEW,QAAQ,IAAKd,qBAAqB,CAAC;QAACc;MAAQ,CAAC,CAAC,CAAC,CAAC,CACtG,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,cAAc,GAAGrB,YAAY,CAAC,MAAK;MACjC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAACoB,cAAc,CAAC,EAC5CX,SAAS,CAAC,CAAC;QAAEY;MAAO,CAAE,KACpB,IAAI,CAACP,oBAAoB,CAACQ,aAAa,CAACD,OAAO,CAAC,CAACL,IAAI,CACnDT,GAAG,CAAC,MAAK;QACP,OAAOD,oBAAoB,CAACe,OAAO,CAAC;MACtC,CAAC,CAAC,EACFX,UAAU,CAAEa,KAAwB,IAAKf,EAAE,CAACH,kBAAkB,CAAC;QAAEkB,KAAK,EAAEA,KAAK,CAACC;MAAO,CAAE,CAAC,CAAC,CAAC,CAC3F,CACF,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,gBAAgB,GAAG3B,YAAY,CAAC,MAAK;MACnC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAAC0B,gBAAgB,CAAC,EAC9CjB,SAAS,CAAC,CAAC;QAAEkB;MAAE,CAAE,KACf,IAAI,CAACb,oBAAoB,CAACc,eAAe,CAACD,EAAE,CAAC,CAACX,IAAI,CAChDT,GAAG,CAAC,MAAML,sBAAsB,EAAE,CAAC,EACnCQ,UAAU,CAAEa,KAAwB,IAAKf,EAAE,CAACP,oBAAoB,CAAC;QAAEsB,KAAK,EAAEA,KAAK,CAACC;MAAO,CAAE,CAAC,CAAC,CAAC,CAC7F,CACF,CACF;IACH,CAAC,CAAC;IAEF,KAAAK,iBAAiB,GAAG/B,YAAY,CAAC,MAAK;MACpC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CACJC,qBAAqB,CAAC8B,sBAAsB,EAC5C9B,qBAAqB,CAAC+B,wBAAwB,CAC/C,EACDxB,GAAG,CAAEW,QAAQ,IAAI;QACf,OAAOf,cAAc,EAAE;MACzB,CAAC,CAAC,CACH;IACH,CAAC,CAAC;EAEF;;SAhDWQ,iBAAiB;;mBAAjBA,MAAiB,EAAAqB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,oBAAA;AAAA;;SAAjB1B,MAAiB;EAAA2B,OAAA,EAAjB3B,MAAiB,CAAA4B;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}