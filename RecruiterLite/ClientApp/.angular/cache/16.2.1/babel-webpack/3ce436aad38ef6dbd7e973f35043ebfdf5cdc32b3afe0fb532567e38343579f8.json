{"ast":null,"code":"var _class;\nimport { createEffect, ofType } from \"@ngrx/effects\";\nimport { CandidatesActionTypes, deleteCandidateError, deleteCandidateSuccess, loadCandidates, loadCandidatesSuccess, saveCandidateError, saveCandidateSuccess } from \"./candidates.actions\";\nimport { map, of, switchMap } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"./candidates-api.service\";\nexport class CandidatesEffects {\n  constructor(actions$, candidatesApiService) {\n    this.actions$ = actions$;\n    this.candidatesApiService = candidatesApiService;\n    this.loadCandidates$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.LOAD_CANDIDATES), switchMap(() => this.candidatesApiService.loadCandidates().pipe(map(response => loadCandidatesSuccess({\n        response\n      })))));\n    });\n    this.saveCandidate$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE), switchMap(({\n        request,\n        id\n      }) => this.candidatesApiService.saveCandidate(request).pipe(map(() => {\n        return saveCandidateSuccess(request);\n      }), catchError(error => of(saveCandidateError({\n        error: error.message\n      }))))));\n    });\n    this.deleteCandidate$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.DELETE_CANDIDATE), switchMap(({\n        id\n      }) => this.candidatesApiService.deleteCandidate(id).pipe(map(() => {\n        debugger;\n        return deleteCandidateSuccess();\n      }), catchError(error => of(deleteCandidateError({\n        error: error.message\n      }))))));\n    });\n    this.reloadCandidates$ = createEffect(() => {\n      return this.actions$.pipe(ofType(CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS, CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS), map(response => {\n        console.log(response);\n        return loadCandidates();\n      }));\n    });\n  }\n}\n_class = CandidatesEffects;\n_class.ɵfac = function CandidatesEffects_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.CandidatesApiService));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac\n});","map":{"version":3,"names":["createEffect","ofType","CandidatesActionTypes","deleteCandidateError","deleteCandidateSuccess","loadCandidates","loadCandidatesSuccess","saveCandidateError","saveCandidateSuccess","map","of","switchMap","catchError","CandidatesEffects","constructor","actions$","candidatesApiService","loadCandidates$","pipe","LOAD_CANDIDATES","response","saveCandidate$","SAVE_CANDIDATE","request","id","saveCandidate","error","message","deleteCandidate$","DELETE_CANDIDATE","deleteCandidate","reloadCandidates$","SAVE_CANDIDATE_SUCCESS","DELETE_CANDIDATE_SUCCESS","console","log","i0","ɵɵinject","i1","Actions","i2","CandidatesApiService","factory","ɵfac"],"sources":["/Users/richardash/Dev/RecruiterLite/RecruiterLite/ClientApp/src/app/candidates/store/candidates.effects.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport {Actions, createEffect, ofType} from \"@ngrx/effects\";\nimport {CandidatesApiService} from \"./candidates-api.service\";\nimport {\n  CandidatesActionTypes, deleteCandidateError, deleteCandidateSuccess, loadCandidates,\n  loadCandidatesSuccess,\n  saveCandidateError,\n  saveCandidateSuccess\n} from \"./candidates.actions\";\nimport {map, of, switchMap} from \"rxjs\";\nimport {catchError} from \"rxjs/operators\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\n\n@Injectable()\nexport class CandidatesEffects {\n  loadCandidates$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.LOAD_CANDIDATES),\n      switchMap(() =>\n        this.candidatesApiService.loadCandidates().pipe(map((response) => loadCandidatesSuccess({response})))\n      )\n    );\n  });\n\n  saveCandidate$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.SAVE_CANDIDATE),\n      switchMap(({ request, id }) =>\n        this.candidatesApiService.saveCandidate(request).pipe(\n          map(() => {\n            return saveCandidateSuccess(request);\n          }),\n          catchError((error: HttpErrorResponse) => of(saveCandidateError({ error: error.message })))\n        )\n      )\n    );\n  });\n\n  deleteCandidate$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(CandidatesActionTypes.DELETE_CANDIDATE),\n      switchMap(({ id }) =>\n        this.candidatesApiService.deleteCandidate(id).pipe(\n          map(() => {\n            debugger;\n            return deleteCandidateSuccess()}),\n          catchError((error: HttpErrorResponse) => of(deleteCandidateError({ error: error.message })))\n        )\n      )\n    );\n  });\n\n  reloadCandidates$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(\n        CandidatesActionTypes.SAVE_CANDIDATE_SUCCESS,\n        CandidatesActionTypes.DELETE_CANDIDATE_SUCCESS,\n      ),\n      map((response) => {\n        console.log(response);\n        return loadCandidates()\n      })\n    );\n  });\n  constructor(private actions$: Actions, private candidatesApiService: CandidatesApiService) {\n  }\n}\n"],"mappings":";AACA,SAAiBA,YAAY,EAAEC,MAAM,QAAO,eAAe;AAE3D,SACEC,qBAAqB,EAAEC,oBAAoB,EAAEC,sBAAsB,EAAEC,cAAc,EACnFC,qBAAqB,EACrBC,kBAAkB,EAClBC,oBAAoB,QACf,sBAAsB;AAC7B,SAAQC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAO,MAAM;AACvC,SAAQC,UAAU,QAAO,gBAAgB;;;;AAIzC,OAAM,MAAOC,iBAAiB;EAkD5BC,YAAoBC,QAAiB,EAAUC,oBAA0C;IAArE,KAAAD,QAAQ,GAARA,QAAQ;IAAmB,KAAAC,oBAAoB,GAApBA,oBAAoB;IAjDnE,KAAAC,eAAe,GAAGjB,YAAY,CAAC,MAAK;MAClC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAACiB,eAAe,CAAC,EAC7CR,SAAS,CAAC,MACR,IAAI,CAACK,oBAAoB,CAACX,cAAc,EAAE,CAACa,IAAI,CAACT,GAAG,CAAEW,QAAQ,IAAKd,qBAAqB,CAAC;QAACc;MAAQ,CAAC,CAAC,CAAC,CAAC,CACtG,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,cAAc,GAAGrB,YAAY,CAAC,MAAK;MACjC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAACoB,cAAc,CAAC,EAC5CX,SAAS,CAAC,CAAC;QAAEY,OAAO;QAAEC;MAAE,CAAE,KACxB,IAAI,CAACR,oBAAoB,CAACS,aAAa,CAACF,OAAO,CAAC,CAACL,IAAI,CACnDT,GAAG,CAAC,MAAK;QACP,OAAOD,oBAAoB,CAACe,OAAO,CAAC;MACtC,CAAC,CAAC,EACFX,UAAU,CAAEc,KAAwB,IAAKhB,EAAE,CAACH,kBAAkB,CAAC;QAAEmB,KAAK,EAAEA,KAAK,CAACC;MAAO,CAAE,CAAC,CAAC,CAAC,CAC3F,CACF,CACF;IACH,CAAC,CAAC;IAEF,KAAAC,gBAAgB,GAAG5B,YAAY,CAAC,MAAK;MACnC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CAACC,qBAAqB,CAAC2B,gBAAgB,CAAC,EAC9ClB,SAAS,CAAC,CAAC;QAAEa;MAAE,CAAE,KACf,IAAI,CAACR,oBAAoB,CAACc,eAAe,CAACN,EAAE,CAAC,CAACN,IAAI,CAChDT,GAAG,CAAC,MAAK;QACP;QACA,OAAOL,sBAAsB,EAAE;MAAA,CAAC,CAAC,EACnCQ,UAAU,CAAEc,KAAwB,IAAKhB,EAAE,CAACP,oBAAoB,CAAC;QAAEuB,KAAK,EAAEA,KAAK,CAACC;MAAO,CAAE,CAAC,CAAC,CAAC,CAC7F,CACF,CACF;IACH,CAAC,CAAC;IAEF,KAAAI,iBAAiB,GAAG/B,YAAY,CAAC,MAAK;MACpC,OAAO,IAAI,CAACe,QAAQ,CAACG,IAAI,CACvBjB,MAAM,CACJC,qBAAqB,CAAC8B,sBAAsB,EAC5C9B,qBAAqB,CAAC+B,wBAAwB,CAC/C,EACDxB,GAAG,CAAEW,QAAQ,IAAI;QACfc,OAAO,CAACC,GAAG,CAACf,QAAQ,CAAC;QACrB,OAAOf,cAAc,EAAE;MACzB,CAAC,CAAC,CACH;IACH,CAAC,CAAC;EAEF;;SAnDWQ,iBAAiB;;mBAAjBA,MAAiB,EAAAuB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,oBAAA;AAAA;;SAAjB5B,MAAiB;EAAA6B,OAAA,EAAjB7B,MAAiB,CAAA8B;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}